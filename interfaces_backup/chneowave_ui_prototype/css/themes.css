/* ==========================================================================
   CHNeoWave Maritime Themes
   Système de thèmes clair/sombre avec transitions fluides
   ========================================================================== */

/* ==========================================================================
   THÈME CLAIR (PAR DÉFAUT)
   ========================================================================== */

[data-theme="light"] {
  /* Couleurs de fond */
  --bg-primary: var(--foam-white);
  --bg-secondary: var(--frost-light);
  --bg-elevated: var(--pearl-white);
  --bg-overlay: rgba(255, 255, 255, 0.95);
  
  /* Couleurs de bordure */
  --border-primary: var(--mist-gray);
  --border-secondary: var(--wave-gray);
  --border-focus: var(--harbor-blue);
  
  /* Couleurs de texte */
  --text-primary: var(--storm-gray);
  --text-secondary: var(--slate-gray);
  --text-tertiary: var(--anchor-gray);
  --text-inverse: white;
  
  /* Couleurs d'interaction */
  --interactive-primary: var(--harbor-blue);
  --interactive-secondary: var(--steel-blue);
  --interactive-accent: var(--tidal-cyan);
  
  /* Ombres */
  --shadow-color: rgba(10, 25, 41, 0.1);
  --shadow-primary: var(--shadow-sm);
  --shadow-elevated: var(--shadow-md);
  --shadow-floating: var(--shadow-lg);
  
  /* États de survol */
  --hover-bg: var(--wave-gray);
  --hover-border: var(--harbor-blue);
  --hover-shadow: var(--shadow-md);
}

/* ==========================================================================
   THÈME SOMBRE
   ========================================================================== */

[data-theme="dark"] {
  /* Couleurs de fond */
  --bg-primary: var(--ocean-deep);
  --bg-secondary: #1A2332;
  --bg-elevated: #243447;
  --bg-overlay: rgba(10, 25, 41, 0.95);
  
  /* Couleurs de bordure */
  --border-primary: #2D3E50;
  --border-secondary: #34495E;
  --border-focus: var(--tidal-cyan);
  
  /* Couleurs de texte */
  --text-primary: var(--text-on-dark);
  --text-secondary: var(--text-on-dark-secondary);
  --text-tertiary: rgba(255, 255, 255, 0.45);
  --text-inverse: var(--storm-gray);
  
  /* Couleurs d'interaction */
  --interactive-primary: var(--tidal-cyan);
  --interactive-secondary: var(--harbor-blue);
  --interactive-accent: #64B5F6;
  
  /* Ombres */
  --shadow-color: rgba(0, 0, 0, 0.3);
  --shadow-primary: var(--shadow-dark-sm);
  --shadow-elevated: var(--shadow-dark-md);
  --shadow-floating: var(--shadow-dark-lg);
  
  /* États de survol */
  --hover-bg: #34495E;
  --hover-border: var(--tidal-cyan);
  --hover-shadow: var(--shadow-dark-md);
}

/* ==========================================================================
   TRANSITIONS DE THÈME
   ========================================================================== */

/* Transition globale pour tous les éléments */
* {
  transition: 
    background-color var(--transition-normal),
    border-color var(--transition-normal),
    color var(--transition-normal),
    box-shadow var(--transition-normal);
}

/* Éléments spécifiques avec transitions personnalisées */
.maritime-sidebar,
.main-content,
.kpi-card,
.chart-container,
.action-card,
.result-card {
  transition: 
    background-color var(--transition-normal),
    border-color var(--transition-normal),
    box-shadow var(--transition-normal),
    transform var(--transition-fast);
}

/* ==========================================================================
   APPLICATIONS DES THÈMES
   ========================================================================== */

/* Corps principal */
body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Sidebar */
.maritime-sidebar {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
  box-shadow: var(--shadow-primary);
}

/* Navigation */
.nav-item {
  color: var(--text-secondary);
}

.nav-item:hover {
  background-color: var(--hover-bg);
}

.nav-item.active {
  background: linear-gradient(135deg, var(--interactive-primary), var(--interactive-secondary));
  color: var(--text-inverse);
}

/* Header principal */
.main-header {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
  box-shadow: var(--shadow-primary);
}

.header-title h1 {
  color: var(--text-primary);
}

.header-subtitle {
  color: var(--text-secondary);
}

/* Cartes KPI */
.kpi-card {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.kpi-card:hover {
  box-shadow: var(--shadow-floating);
}

.kpi-number {
  color: var(--text-primary);
}

.kpi-label {
  color: var(--text-secondary);
}

/* Conteneur de graphique */
.chart-container {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.chart-header {
  background-color: var(--bg-secondary);
  border-color: var(--border-primary);
}

.chart-header h3 {
  color: var(--text-primary);
}

.chart-canvas-container {
  background-color: var(--bg-elevated);
}

.chart-legend {
  background-color: var(--bg-secondary);
  border-color: var(--border-primary);
}

.legend-item {
  color: var(--text-secondary);
}

/* Actions rapides */
.action-card {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.action-card:hover {
  border-color: var(--hover-border);
  box-shadow: var(--hover-shadow);
}

.action-content h4 {
  color: var(--text-primary);
}

.action-content p {
  color: var(--text-secondary);
}

/* Boutons */
.btn-primary {
  background: linear-gradient(135deg, var(--interactive-primary), var(--interactive-secondary));
  color: var(--text-inverse);
}

.btn-secondary {
  background-color: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--border-primary);
}

.btn-secondary:hover {
  background-color: var(--bg-secondary);
  border-color: var(--hover-border);
}

/* Toggle de thème */
.theme-btn {
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
  border-color: var(--border-primary);
}

.theme-btn:hover {
  background-color: var(--hover-bg);
  color: var(--text-primary);
}

/* Indicateur de statut */
.system-status {
  background-color: var(--bg-secondary);
}

.status-text {
  color: var(--text-secondary);
}

/* ==========================================================================
   WIZARD (CALIBRATION) THÈME
   ========================================================================== */

.wizard-sidebar {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.step {
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
  border-color: var(--border-primary);
}

.step.active {
  background: linear-gradient(135deg, var(--interactive-primary), var(--interactive-secondary));
  color: var(--text-inverse);
  border-color: var(--interactive-primary);
}

.linearity-chart {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.wizard-actions {
  background-color: var(--bg-secondary);
  border-color: var(--border-primary);
}

/* ==========================================================================
   ACQUISITION THÈME
   ========================================================================== */

.acquisition-controls {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.control-group h4 {
  color: var(--text-primary);
  border-color: var(--border-primary);
}

.realtime-chart {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.chart-title {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  border-color: var(--border-primary);
}

/* ==========================================================================
   ANALYSE THÈME
   ========================================================================== */

.result-card {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.result-card:hover {
  box-shadow: var(--shadow-floating);
}

.result-title {
  color: var(--text-primary);
}

.result-value {
  color: var(--interactive-primary);
}

.result-description {
  color: var(--text-secondary);
}

/* ==========================================================================
   EXPORT THÈME
   ========================================================================== */

.export-preview {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.preview-header {
  background-color: var(--bg-secondary);
  border-color: var(--border-primary);
}

.preview-content {
  background-color: var(--bg-elevated);
}

.export-options {
  background-color: var(--bg-elevated);
  border-color: var(--border-primary);
}

.option-group label {
  color: var(--text-primary);
}

/* ==========================================================================
   ÉLÉMENTS DE FORMULAIRE THÈME
   ========================================================================== */

.chart-timeframe {
  background-color: var(--bg-elevated);
  color: var(--text-primary);
  border-color: var(--border-primary);
}

.chart-timeframe:hover {
  border-color: var(--hover-border);
}

.chart-timeframe:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(var(--interactive-primary), 0.1);
}

/* ==========================================================================
   LOADING STATES THÈME
   ========================================================================== */

.chart-loading {
  background-color: var(--bg-overlay);
  color: var(--text-secondary);
}

.loading-spinner {
  border-color: var(--border-secondary);
  border-top-color: var(--interactive-primary);
}

/* ==========================================================================
   ANIMATIONS SPÉCIFIQUES AU THÈME
   ========================================================================== */

/* Animation de changement de thème */
@keyframes themeTransition {
  0% {
    opacity: 0.8;
  }
  50% {
    opacity: 0.9;
  }
  100% {
    opacity: 1;
  }
}

/* Application de l'animation lors du changement */
[data-theme] {
  animation: themeTransition 0.3s ease-out;
}

/* ==========================================================================
   PRÉFÉRENCES SYSTÈME
   ========================================================================== */

/* Respect des préférences système pour le thème sombre */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    /* Applique automatiquement le thème sombre si pas de préférence définie */
    --bg-primary: var(--ocean-deep);
    --bg-secondary: #1A2332;
    --bg-elevated: #243447;
    --text-primary: var(--text-on-dark);
    --text-secondary: var(--text-on-dark-secondary);
    --interactive-primary: var(--tidal-cyan);
  }
}

/* ==========================================================================
   CONTRASTE ÉLEVÉ
   ========================================================================== */

@media (prefers-contrast: high) {
  [data-theme="light"] {
    --text-primary: #000000;
    --text-secondary: #333333;
    --border-primary: #666666;
    --interactive-primary: #0000FF;
  }
  
  [data-theme="dark"] {
    --text-primary: #FFFFFF;
    --text-secondary: #CCCCCC;
    --border-primary: #999999;
    --interactive-primary: #00FFFF;
  }
  
  .kpi-card,
  .chart-container,
  .action-card {
    border-width: 2px;
  }
}

/* ==========================================================================
   THÈME POUR IMPRESSION
   ========================================================================== */

@media print {
  * {
    background: white !important;
    color: black !important;
    border-color: #666666 !important;
    box-shadow: none !important;
  }
  
  .btn-primary,
  .nav-item.active {
    background: #333333 !important;
    color: white !important;
  }
}